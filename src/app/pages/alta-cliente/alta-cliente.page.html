<div class="container background-pri">
  <ion-card>
    <ion-card-header>
      <ion-card-title>Alta de Cliente</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-item>
        <ion-label>Registrarse como anónimo</ion-label>
        <ion-toggle (ionChange)="toggleTipoCliente($event)"></ion-toggle>
      </ion-item>
      <form [formGroup]="frmCliente" (ngSubmit)="subirCliente()">
        <div class="inputs">
          <div id="correo" class="correo">
            <ion-input id="input-correo" label="Correo" label-placement="fixed" type="email"
              formControlName="correo" name="email" required ngDefaultControl>
              <ion-button id="btn-correo" fill="clear" slot="end" aria-label="Buscar/Cambiar" (click)="buscarCorreo();"
                [disabled]="frmCliente.controls['correo'].errors">
                <ion-icon slot="icon-only" name="search" aria-hidden="true"></ion-icon>
              </ion-button>
            </ion-input>
            <div class="errores" *ngIf="frmCliente.controls['correo'].dirty && frmCliente.controls['correo'].errors">
              <small *ngIf="frmCliente.controls['correo'].errors['required']">Debe rellenar este campo.</small>
              <small *ngIf="frmCliente.controls['correo'].errors['pattern']">No es un correo electrónico.</small>
            </div>
          </div>
          <div id="dni" class="dni deshabilitado">
            <ion-input id="input-dni" label="DNI" label-placement="fixed" type="text"
              formControlName="dni" name="dni" required ngDefaultControl>
              <ion-button id="btn-dni" *ngIf="frmCliente.controls['dni'].errors; else buscar"
                fill="clear" slot="end" aria-label="escanear" (click)="escanearDni();">
                <ion-icon slot="icon-only" name="scan" aria-hidden="true"></ion-icon>
              </ion-button>
              <ng-template #buscar>
                <ion-button id="btn-dni" fill="clear" slot="end" aria-label="buscar" (click)="buscarDni();">
                  <ion-icon slot="icon-only" name="search" aria-hidden="true"></ion-icon>
                </ion-button>
              </ng-template>
            </ion-input>
            <div class="errores" *ngIf="frmCliente.controls['dni'].dirty && frmCliente.controls['dni'].errors">
              <small *ngIf="frmCliente.controls['dni'].errors['required']">Debe rellenar este campo.</small>
              <small *ngIf="frmCliente.controls['dni'].errors['pattern']">No es un DNI.</small>
            </div>
          </div>
          <div id="datos-personales">
            <div class="nombre_apellido">
              <div class="nombre">
                <ion-input label="Nombre" label-placement="fixed" type="text"
                  formControlName="nombre" name="name" required ngDefaultControl>
                </ion-input>
                <div class="errores"
                  *ngIf="frmCliente.controls['nombre'].dirty && frmCliente.controls['nombre'].errors">
                  <small *ngIf="frmCliente.controls['nombre'].errors['required']">Debe rellenar este campo.</small>
                  <small *ngIf="frmCliente.controls['nombre'].errors['pattern']">Compruebe el texto ingresado.</small>
                </div>
              </div>
              <div class="apellido">
                <ion-input label="Apellido" label-placement="fixed" type="text"
                  formControlName="apellido" name="surname" required ngDefaultControl>
                </ion-input>
                <div class="errores"
                  *ngIf="frmCliente.controls['apellido'].dirty && frmCliente.controls['apellido'].errors">
                  <small *ngIf="frmCliente.controls['apellido'].errors['required']">Debe rellenar este campo.</small>
                  <small *ngIf="frmCliente.controls['apellido'].errors['pattern']">Compruebe el texto
                    ingresado.</small>
                </div>
              </div>
            </div>
            <div class="contra">
              <ion-input label="Contraseña" [clearOnEdit]="false" label-placement="fixed"
                helperText="Entre 6 y 20 caracteres." type="password"
                formControlName="contra" name="password" required ngDefaultControl>
                <ion-input-password-toggle slot="end"></ion-input-password-toggle>
              </ion-input>
              <div class="errores"
                *ngIf="frmCliente.controls['contra'].dirty && frmCliente.controls['contra'].errors">
                <small *ngIf="frmCliente.controls['contra'].errors['required']">Debe rellenar este campo.</small>
              </div>
            </div>
          </div>
        </div>
        <ion-button type="submit" expand="block" color="tertiary" [disabled]="frmCliente.invalid">
          Agregar cliente
        </ion-button>
      </form>
    </ion-card-content>
  </ion-card>
</div>
